(self.webpackChunk=self.webpackChunk||[]).push([[771],{771:(e,s,t)=>{"use strict";t.r(s);var o=t(935),r=t(435),a=t(519),n=t(222);class c{constructor(){}static notify({message:e,title:s,classIcon:t,timeout:o}){c.popup({message:e,title:s,classIcon:t,timeout:o,classBorder:""})}static error({message:e,title:s}){c.popup({message:e,title:s,classIcon:c.classesIcon[4],classBorder:c.classesBorder[4]})}static warning({message:e,title:s}){c.popup({message:e,title:s,classIcon:c.classesIcon[3],classBorder:c.classesBorder[3]})}static popup({message:e,title:s,classIcon:t,classBorder:o,timeout:r}){let a={class:"m-2 p-2 my-1 bg-white rounded "+o,style:{border:"solid"},children:[{class:"fas fa-times",style:{float:"right",cursor:"pointer"},onclick:e=>{e.target.parentElement.remove()}},{class:"d-flex py-2 align-items-center",children:[{tag:"i",class:t},{tag:"span",class:"d-block",innerText:s}]},e?{tag:"span",class:"d-block px-2",innerText:e}:{},{class:"d-flex align-space-around mt-2 fv-pointer"}],connectedCallback:e=>{r&&r.subscribe((()=>e.remove()))}},c=(0,n.render)(a);document.getElementById("notifications-container").appendChild(c)}}c.classesIcon={4:"fas fa-2x fa-exclamation-circle text-danger px-2 mt-auto mb-auto",3:"fas fa-2x fa-exclamation text-warning px-2 mt-auto mb-auto"},c.classesBorder={4:"border-danger",3:"border-warning"},t(897);let i=new URLSearchParams(window.location.search).get("id"),l=new class{constructor(){this.environment=new o.Environment({renderingWindow:window,executingWindow:window,console:{...console,log:()=>{}}}),this.subscriptionStore=new Map,this.project$=new r.Subject,this.workflow$=new r.ReplaySubject(1)}loadProjectById(e){(0,o.loadProjectDatabase$)(e,this.workflow$,this.subscriptionStore,this.environment).pipe((0,a.map)((({project:e})=>{let s=e.workflow;return[...s.plugins,...s.modules].forEach((e=>(0,o.instanceOfSideEffects)(e)&&e.apply())),e}))).subscribe((e=>this.project$.next(e)))}};var d;l.loadProjectById(i),(d=l.environment).errors$.pipe((0,a.filter)((e=>e.error instanceof o.ModuleError))).subscribe((e=>c.error({message:e.error.message,title:e.error.module.Factory.id}))),d.processes$.subscribe((e=>{let s={[o.ProcessMessageKind.Scheduled]:"fas fa-clock px-2",[o.ProcessMessageKind.Started]:"fas fa-cog fa-spin px-2",[o.ProcessMessageKind.Succeeded]:"fas fa-check fv-text-success px-2",[o.ProcessMessageKind.Failed]:"fas fa-times fv-text-error px-2",[o.ProcessMessageKind.Log]:"fas fa-cog fa-spin px-2"},t=[o.ProcessMessageKind.Succeeded,o.ProcessMessageKind.Failed];c.notify({title:e.title,message:(0,n.attr$)(e.messages$,(e=>e.text)),classIcon:(0,n.attr$)(e.messages$,(e=>s[e.kind])),timeout:e.messages$.pipe((0,a.filter)((e=>t.includes(e.kind))),(0,a.take)(1),(0,a.delay)(1e3))})})),function(e){e.project$.subscribe((e=>{let s=e.workflow.modules.find((e=>e.moduleId==o.Component.rootComponentId));const t=document.createElement("style");t.textContent=s.getFullCSS(e.workflow,{asString:!0}),document.head.append(t);let r=document.getElementById("content");r.appendChild(s.getOuterHTML()),(0,o.renderTemplate)(r,[s]),function(){let e=document.querySelectorAll(".flux-element");Array.from(e).forEach((e=>{e.style.removeProperty("height"),e.style.removeProperty("width")}))}();let a=new Map,n=[...e.workflow.modules,...e.workflow.plugins];(0,o.subscribeConnections)(n,e.workflow.connections,a)}))}(l)}}]);
//# sourceMappingURL=771.2a030711efe79e381a5e.js.map