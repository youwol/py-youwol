(()=>{"use strict";var e,t,s,r,a,n,i={897:(e,t,s)=>{s.r(t);var r=s(62)(e.id,{locals:!1});e.hot.dispose(r),e.hot.accept(void 0,r)},62:(e,t,s)=>{var r=s(373),a=Object.create(null),n="undefined"==typeof document,i=Array.prototype.forEach;function d(){}function o(e,t){if(!t){if(!e.href)return;t=e.href.split("?")[0]}if(l(t)&&!1!==e.isLoaded&&t&&t.indexOf(".css")>-1){e.visited=!0;var s=e.cloneNode();s.isLoaded=!1,s.addEventListener("load",(function(){s.isLoaded||(s.isLoaded=!0,e.parentNode.removeChild(e))})),s.addEventListener("error",(function(){s.isLoaded||(s.isLoaded=!0,e.parentNode.removeChild(e))})),s.href="".concat(t,"?").concat(Date.now()),e.nextSibling?e.parentNode.insertBefore(s,e.nextSibling):e.parentNode.appendChild(s)}}function c(){var e=document.querySelectorAll("link");i.call(e,(function(e){!0!==e.visited&&o(e)}))}function l(e){return!!/^https?:/i.test(e)}e.exports=function(e,t){if(n)return console.log("no window.document found, will not HMR CSS"),d;var s,u,p=function(e){var t=a[e];if(!t){if(document.currentScript)t=document.currentScript.src;else{var s=document.getElementsByTagName("script"),n=s[s.length-1];n&&(t=n.src)}a[e]=t}return function(e){if(!t)return null;var s=t.split(/([^\\/]+)\.js$/),a=s&&s[1];return a&&e?e.split(",").map((function(e){var s=new RegExp("".concat(a,"\\.js$"),"g");return r(t.replace(s,"".concat(e.replace(/{fileName}/g,a),".css")))})):[t.replace(".js",".css")]}}(e);return s=function(){var e=p(t.filename),s=function(e){if(!e)return!1;var t=document.querySelectorAll("link"),s=!1;return i.call(t,(function(t){if(t.href){var a=function(e,t){var s;return e=r(e,{stripWWW:!1}),t.some((function(r){e.indexOf(t)>-1&&(s=r)})),s}(t.href,e);l(a)&&!0!==t.visited&&a&&(o(t,a),s=!0)}})),s}(e);if(t.locals)return console.log("[HMR] Detected local css modules. Reload all css"),void c();s?console.log("[HMR] css reload %s",e.join(" ")):(console.log("[HMR] Reload all css"),c())},50,u=0,function(){var e=this,t=arguments,r=function(){return s.apply(e,t)};clearTimeout(u),u=setTimeout(r,50)}}},373:e=>{e.exports=function(e){if(e=e.trim(),/^data:/i.test(e))return e;var t=-1!==e.indexOf("//")?e.split("//")[0]+"//":"",s=e.replace(new RegExp(t,"i"),"").split("/"),r=s[0].toLowerCase().replace(/\.$/,"");return s[0]="",t+r+s.reduce((function(e,t){switch(t){case"..":e.pop();break;case".":break;default:e.push(t)}return e}),[]).join("/")}},662:(e,t,s)=>{s.r(t),s.d(t,{AppState:()=>p});var r=s(935),a=s(435),n=s(519),i=s(458),d=s(442);function o(){let e=localStorage.getItem("favorites");return e?JSON.parse(e):[]}var c=s(888);class l extends c.ImmutableTree.State{constructor(e,t){super({rootNode:e}),this.command$=t,this.favorites$=new a.BehaviorSubject([])}expandFavoritesBar(){this.favorites$.next(o())}collapseFavoritesBar(){this.favorites$.next([])}addFavorite(e){i.kb.getAsset$(e.assetId).subscribe((t=>{let s=o().filter((t=>t.assetId!=e.assetId)).concat([new d.rF(t.name,t.assetId,t.thumbnails[0])]);this.favorites$.next(s),localStorage.setItem("favorites",JSON.stringify(s))}))}newDrive(e){let t=(0,r.uuidv4)();e.addStatus({type:"request-pending",id:t}),i.kb.newDrive$(e).subscribe((s=>{e.removeStatus({type:"request-pending",id:t}),this.addChild(e,new d.Uq.DriveNode({id:s.driveId,groupId:e.id,driveId:s.driveId,name:s.name,children:[]}))}))}newFolder(e){let t=(0,r.uuidv4)();e.addStatus({type:"request-pending",id:t}),i.kb.newFolder$(e).subscribe((s=>{e.removeStatus({type:"request-pending",id:t}),this.addChild(e,new d.Uq.FolderNode({id:s.folderId,groupId:e.groupId,driveId:e.driveId,parentFolderId:s.parentFolderId,name:s.name,children:[]}))}))}purgeDrive(e){let t=(0,r.uuidv4)();e.addStatus({type:"request-pending",id:t}),i.kb.purgeDrive$(e).subscribe((s=>{e.removeStatus({type:"request-pending",id:t}),this.replaceNode(e,new d.Uq.TrashNode({id:e.id,groupId:e.groupId,driveId:e.driveId,name:e.name,children:[]}))}))}deleteItem$(e){let t=(0,r.uuidv4)();return e.addStatus({type:"request-pending",id:t}),i.kb.deleteItem$(e).pipe((0,n.map)((s=>{e.removeStatus({type:"request-pending",id:t});let r=this.getParent(e.id);this.removeNode(e);let a=this.getNode("trash_"+e.driveId);if(Array.isArray(a.children)){let t=new d.Uq.DeletedItemNode({id:e.id,name:e.name,driveId:e.driveId,type:"item"});this.addChild(a,t)}return{node:e,parentNode:r}})))}deleteFolder$(e){let t=(0,r.uuidv4)();return e.addStatus({type:"request-pending",id:t}),i.kb.deleteFolder$(e).pipe((0,n.map)((s=>{e.removeStatus({type:"request-pending",id:t});let r=this.getParent(e.id);this.removeNode(e);let a=this.getNode("trash_"+e.driveId);if(Array.isArray(a.children)){let t=new d.Uq.DeletedItemNode({id:e.id,name:e.name,driveId:e.driveId,type:"item"});this.addChild(a,t)}return{node:e,parentNode:r}})))}deleteDrive$(e){let t=(0,r.uuidv4)();return e.addStatus({type:"request-pending",id:t}),i.kb.deleteDrive$(e).pipe((0,n.map)((s=>{e.removeStatus({type:"request-pending",id:t});let r=this.getParent(e.id);return this.removeNode(e),{node:e,parentNode:r}})))}renameAsset$(e,t){let s=(0,r.uuidv4)(),a="string"==typeof e?this.getNode(e):e;return a.addStatus({type:"request-pending",id:s}),i.kb.renameAsset$(a,t).pipe((0,n.map)((e=>(a.removeStatus({type:"request-pending",id:s}),this.replaceAttributes(a,{name:t}),{node:a,respData:e}))))}renameFolder$(e,t){let s=(0,r.uuidv4)();return e.addStatus({type:"request-pending",id:s}),i.kb.renameFolder$(e,t).pipe((0,n.map)((r=>(e.removeStatus({type:"request-pending",id:s}),this.replaceAttributes(e,{name:t}),{node:e,respData:r}))))}renameDrive$(e,t){let s=(0,r.uuidv4)();return e.addStatus({type:"request-pending",id:s}),i.kb.renameDrive$(e,t).pipe((0,n.map)((r=>(e.removeStatus({type:"request-pending",id:s}),this.replaceAttributes(e,{name:t}),{node:e,respData:r}))))}newFluxProject$(e){let t=(0,r.uuidv4)();return e.addStatus({type:"request-pending",id:t}),i.kb.newFluxProject$(e).pipe((0,n.map)((s=>{e.removeStatus({type:"request-pending",id:t});let r=new d.Uq.FluxProjectNode({id:s.treeId,groupId:e.groupId,driveId:e.driveId,name:s.name,assetId:s.assetId,relatedId:s.relatedId,borrowed:!1});return this.addChild(e,r),{node:r,parentNode:e}})))}newGroupShowcase$(e,{groupId:t,path:s}){let a=(0,r.uuidv4)();return e.addStatus({type:"request-pending",id:a}),i.kb.exposeGroup$(e,{groupId:t,name:s}).pipe((0,n.map)((t=>{e.removeStatus({type:"request-pending",id:a});let s=new d.Uq.ExposedGroupNode({id:t.treeId,driveId:e.driveId,groupId:e.groupId,name:t.name,assetId:t.assetId,relatedId:t.relatedId,borrowed:t.borrowed});return this.addChild(e,s),{node:s,parentNode:this.getNode(e.id)}})))}package(e){let t=(0,r.uuidv4)();e.addStatus({type:"request-pending",id:t}),i.kb.package$(e).subscribe((s=>{e.removeStatus({type:"request-pending",id:t}),this.addChild(e,new d.Uq.DataNode({id:s.treeId,driveId:e.driveId,groupId:e.groupId,name:s.name,assetId:s.assetId,relatedId:s.rawId,borrowed:!1}))}))}unpackage(e){let t=(0,r.uuidv4)();e.addStatus({type:"request-pending",id:t}),i.kb.unpackage$(e).pipe((0,n.mergeMap)((()=>i.kb.getFolderChildren$(e.groupId,e.driveId,e.driveId)))).subscribe((s=>{console.log("Resp",s);let r=this.getParent(e.id);s.filter((t=>t.id!=e.id)).forEach(((e,t,s)=>{this.addChild(r.id,e,t==s.length-1)})),e.removeStatus({type:"request-pending",id:t})}))}toggleRenaming(e){e.addStatus({type:"renaming"})}importAssets(e,t){let s=(0,r.uuidv4)();e.addStatus({type:"request-pending",id:s});let n=t.filter((e=>"flux-project"==e.kind)),o=t.filter((e=>"flux-pack"==e.kind)),c=t=>({id:t.assetId,driveId:e.driveId,groupId:e.groupId,name:t.name,assetId:t.assetId,relatedId:t.relatedId,borrowed:!1});(0,a.combineLatest)([i.kb.importFluxProjects$(e,n),i.kb.importFluxPacks$(e,o)]).subscribe((([r,a])=>{e.removeStatus({type:"request-pending",id:s}),r.items.forEach(((s,r)=>{let a=new d.Uq.FluxProjectNode(c(s));this.addChild(e.id,a,r==t.length-1)})),a.items.forEach(((s,r)=>{let a=new d.Uq.FluxPackNode(c(s));this.addChild(e.id,a,r==t.length-1)})),this.command$.next({type:"refresh"})}))}addPackage(e,t){let s=i.kb.uploadPackage$(e,t.files[0]),r=new d.Uq.ProgressNode({name:t.files[0].name,id:"progress_"+t.files[0].name,progress$:s});this.addChild(e.id,r),s.pipe((0,n.filter)((e=>e.step==d.Ih.FINISHED))).subscribe((t=>{let s=this.getNode("progress_"+t.fileName);this.removeNode(s);let r=new d.Uq.PackageNode({id:t.result.treeId,driveId:e.driveId,groupId:e.groupId,name:t.result.name,assetId:t.result.assetId,relatedId:t.result.rawId,borrowed:!1});this.addChild(e.id,r),this.command$.next({type:"refresh"})}))}borrowItem(e){e.addStatus({type:"cut"}),this.itemCut={cutType:"borrow",node:e}}cutItem(e){e.addStatus({type:"cut"}),this.itemCut={cutType:"move",node:e}}pasteItem(e){if(this.itemCut){let t=(0,r.uuidv4)();e.addStatus({type:"request-pending",id:t});let s=this.itemCut.node;"move"==this.itemCut.cutType&&i.kb.move$(s,e).subscribe((r=>{e.removeStatus({type:"request-pending",id:t});let a=i.kb.children(e.groupId,e.driveId,e.id,r),n=e instanceof d.Uq.FolderNode?new d.Uq.FolderNode(Object.assign({},e,{children:a})):new d.Uq.DriveNode(Object.assign({},e,{children:a}));this.removeNode(s,!1),this.replaceNode(e,n),s.removeStatus({type:"cut"}),this.itemCut=void 0})),"borrow"==this.itemCut.cutType&&i.kb.borrow$(s,e).subscribe((r=>{e.removeStatus({type:"request-pending",id:t});let a=d.Uq.itemNodeFactory(r);this.addChild(e.id,a),s.removeStatus({type:"cut"}),this.itemCut=void 0}))}}uploadFiles(e,t){let s=(0,r.uuidv4)();e.addStatus({type:"request-pending",id:s});let o=Array.from(t.files).map((t=>i.kb.uploadFile$(e,t)));o.forEach(((s,r)=>{let a=new d.Uq.ProgressNode({name:t.files[r].name,id:"progress_"+t.files[r].name,progress$:s});this.addChild(e.id,a)})),o.forEach((t=>{t.pipe((0,n.filter)((e=>e.step==d.Ih.FINISHED))).subscribe((t=>{let s=this.getNode("progress_"+t.fileName);this.removeNode(s);let r=new d.Uq.DataNode({id:t.result.treeId,driveId:e.driveId,groupId:e.groupId,name:t.result.name,assetId:t.result.assetId,relatedId:t.result.relatedId,borrowed:t.result.borrowed});this.addChild(e.id,r),this.command$.next({type:"refresh"})}))})),(0,a.combineLatest)(o).pipe((0,n.filter)((e=>e.filter((e=>e.step==d.Ih.FINISHED)).length==e.length))).subscribe((t=>{e.removeStatus({type:"request-pending",id:s})}))}}const u=["image/apng","image/bmp","image/gif","image/jpeg","image/pjpeg","image/png","image/svg+xml","image/tiff","image/webp","image/x-icon"];class p extends l{constructor(){super(new d.Uq.RootNode({id:"root",name:"Subscribed groups",children:i.kb.getGroupsChildren$()}),new a.Subject),this.selectedDrive$=new a.Subject,this.selectedFolder$=new a.Subject,this.selectedAsset$=new a.BehaviorSubject(void 0),this.updatedAsset$=new a.Subject,this.deletedAsset$=new a.Subject,this.duplicatedAsset$=new a.Subject,this.assets$=new a.Subject,this.recursiveSearch$=new a.BehaviorSubject(!1),this.queryString$=new a.BehaviorSubject(""),this.browserState=this,this.items$=(0,a.combineLatest)([this.recursiveSearch$,(0,a.merge)(this.selectedDrive$,this.selectedFolder$)]).pipe((0,n.mergeMap)((([e,t])=>{let s={driveId:t.driveId,groupId:t.groupId,folderId:t.id,recursive:e,queryStr:this.queryString$.getValue(),fluxProject:!0};return i.kb.queryAssets$(s)})),(0,n.share)()),this.command$.subscribe((({type:e})=>{"refresh"==e&&this.refreshAssetCardsView()})),window.addEventListener("paste",(e=>{this.addImageFromClipboard(e)}),!1)}updateSelection(e){e instanceof d.Uq.ItemNode&&i.kb.getAsset$(e.assetId).subscribe((e=>{this.updatedAsset$.next(e),this.selectedAsset$.next(new d.xR(e))})),e instanceof d.Uq.FolderNode&&this.selectedFolder$.next(e),e instanceof d.Uq.DriveNode&&this.selectedDrive$.next(e),this.command$.next({type:"refresh"})}deleteItem(e){this.browserState.deleteItem$(e).subscribe((({node:e,parentNode:t})=>{this.updateSelection(t)}))}deleteFolder(e){this.browserState.deleteFolder$(e).subscribe((({node:e,parentNode:t})=>{this.updateSelection(t)}))}deleteDrive(e){this.browserState.deleteDrive$(e).subscribe((({node:e,parentNode:t})=>{this.updateSelection(t)}))}newFluxProject(e){this.browserState.newFluxProject$(e).subscribe((({node:e,parentNode:t})=>{this.updateSelection(t),this.updateSelection(e)}))}rename(e,t){e.removeStatus({type:"renaming"}),e instanceof d.Uq.FolderNode&&this.browserState.renameFolder$(e,t).subscribe(),e instanceof d.Uq.DriveNode&&this.browserState.renameDrive$(e,t).subscribe(),e instanceof d.Uq.ItemNode&&this.browserState.renameAsset$(e,t).subscribe((({node:e,respData:t})=>{this.selectedAsset$.next(new d.xR(t)),this.command$.next({type:"refresh"})}))}exposeGroup(e,{groupId:t,path:s}){this.browserState.newGroupShowcase$(e,{groupId:t,path:s}).subscribe((({node:e,parentNode:t})=>{this.updateSelection(t)}))}updateAsset(e,t){let s=this.getNode(e.treeId),a=(0,r.uuidv4)();s&&s.addStatus({type:"request-pending",id:a}),i.kb.updateAsset$(e,t).subscribe((e=>{s&&s.removeStatus({type:"request-pending",id:a}),this.selectedAsset$.next(new d.xR(e)),s&&t.name&&this.replaceAttributes(s,{name:t.name}),t.name&&this.refreshAssetCardsView()}))}newImage(e,t){return{id:t?Math.floor(1e5*Math.random())+"."+t.name.split(".").slice(-1):e.split("/").slice(-1),src:e,file:t}}addImages(e,t){let s=[];for(let e of t)s.push(e);let r=s.filter((e=>function(e){return u.includes(e.type)}(e))).map((e=>this.newImage(URL.createObjectURL(e),e)));console.log("Add  images"),(0,a.from)(r).pipe((0,n.mergeMap)((t=>i.kb.addPicture$(e,t)))).subscribe((e=>{console.log("Asset!!",e),this.updatedAsset$.next(e),this.selectedAsset$.next(new d.xR(e))}))}addImageFromClipboard(e){let t=this.selectedAsset$.getValue(),s=e.clipboardData.items[0];if(0===s.type.indexOf("image")){var r=s.getAsFile();let e=this.newImage(URL.createObjectURL(r),r);i.kb.addPicture$(t,e).subscribe((e=>{this.updatedAsset$.next(e),this.selectedAsset$.next(new d.xR(e))}))}}removePicture(e,t){i.kb.removePicture$(e,t).subscribe((e=>{let t=new d.xR(e);this.updatedAsset$.next(t),this.selectedAsset$.next(t)}))}refreshAssetCardsView(){this.recursiveSearch$.next(this.recursiveSearch$.getValue())}}},869:(e,t,s)=>{s.r(t),s.d(t,{AppView:()=>K});const r=window["@youwol/fv-tabs"];var a=s(435),n=s(442);class i extends r.Tabs.TabData{constructor(e,t,s,r){super(e,t),this.asset=s,this.appState=r,this.titleClass="w-100 text-center",this.titleStyle={"font-family":"fantasy","font-size":"large"},this.classSection="py-2"}}var d=s(222);const o=window["@youwol/fv-input"];var c=s(519),l=s(458);function u(e,t){let s={text:e=>({class:"overflow-auto mx-2",style:{"max-width":"33vw"},innerText:e}),image:e=>({class:"mx-2",style:{"max-width":"33vw"},children:[{tag:"img",src:e,class:"d-flex justify-content-center w-100 px-2",style:{"margin-top":"auto","margin-bottom":"auto"}}]})};return{snippets:{},view:l.kb.dataPreview$(t.rawId).pipe((0,c.map)((e=>s[e.kind]?s[e.kind](e.content):{})))}}let p=["application/json","text/html","application/javascript","text/plain","text/markdown","application/x-yaml","text/yaml","image/png","image/jpeg","image/gif","image/bmp","image/x-icon","image/tiff","image/webp","image/svg+xml"],h=["identity","br","gzip"];class f extends i{constructor(e,t){super("metadata","Metadata",e,t),this.asset=e,this.appState=t}view(){return{class:"d-flex flex-column p-5",children:[{class:"d-flex align-items-center m-3 fv-text-primary",children:[{innerText:"content url:",class:"px-2"},{tag:"a",href:`/api/assets-gateway/raw/data/${this.asset.rawId}`,innerText:`/api/assets-gateway/raw/data/${this.asset.rawId}`,style:{"font-family":"fantasy"}}]},(0,d.child$)(l.kb.getDataMetadata$(this.asset.rawId),(e=>({class:"fv-text-primary",children:[m(this.asset,e,"contentType"),m(this.asset,e,"contentEncoding")]})))]}}}function m(e,t,s){let r=("contentType"==s?p:h).map((e=>new o.Select.ItemData(e,e))),n=new a.BehaviorSubject(t[s]),i=new o.Select.State(r,n),c=new o.Select.View({state:i}),u=new a.BehaviorSubject(!1);return{class:"d-flex align-items-center m-3",children:[{innerText:`${s}:`,class:"px-2"},(0,d.child$)(u,(e=>{let t=n.getValue();return e?c:{innerText:""==t?"identity":t,style:{"font-family":"fantasy"}}})),(0,d.child$)(u,(t=>{return t?function(e,t,s,r){return{tag:"i",class:"fas fa-check px-2",onclick:()=>{t.next(!1),l.kb.updateDataMetadata$(e.rawId,{[r]:s.getValue()}).subscribe((()=>{}))}}}(e,u,n,s):(r=u,{tag:"i",class:"fas fa-pen px-2",onclick:()=>r.next(!0)});var r}))]}}const g=window["@youwol/fv-button"];function b(e,t){let s=new a.BehaviorSubject(0);return s.next(0),{snippets:{class:"h-100",style:{width:"150px","min-width":"150px","max-width":"150px"},children:[{children:t.thumbnails.map(((r,a)=>{let n="d-flex justify-content-center w-100 fv-border";return{class:"d-fex align-items-center mb-2 position-relative",children:[{class:(0,d.attr$)(s,(e=>e==a?n+" fv-color-focus":n)),tag:"img",src:r,style:{"margin-top":"auto","margin-bottom":"auto"},onclick:()=>s.next(a)},(0,d.child$)(t.accessInfo$.pipe((0,c.filter)((e=>e.consumerInfo.permissions.write))),(()=>({tag:"i",class:"fas fa-trash position-absolute fv-bg-background rounded p-1 fv-hover-opacity",style:{top:"5px",left:"5px"},onclick:s=>e.removePicture(t,r.split("/").slice(-1)[0])})))]}}))},(0,d.child$)(t.accessInfo$.pipe((0,c.filter)((e=>e.consumerInfo.permissions.write))),(()=>({class:"p-2 w-100",children:[{tag:"label",class:"fas fa-2x fa-upload fv-pointer w-100 text-center",for:"image_uploads",onclick:e=>document.getElementById("image_uploads").dispatchEvent(new MouseEvent("click"))},{tag:"input",type:"file",id:"image_uploads",class:"hoverable",multiple:!0,accept:".jpg, .jpeg, .png",style:{width:"0px",opacity:"0"},oninput:s=>e.addImages(t,s.target.files)}]}))),(0,d.child$)(t.accessInfo$.pipe((0,c.filter)((e=>e.consumerInfo.permissions.write))),(()=>({tag:"div",class:"d-flex flex-row w-100",children:[{tag:"label",class:"text-center w-100 py-4",innerHTML:"<em>you can also paste from clipboard</em>",for:"image_clipboard"}]})))]},view:{class:"w-50",children:[{class:"d-flex justify-content-center w-100 px-2",tag:"img",src:(0,d.attr$)(s,(e=>t.images[e])),style:{"margin-top":"auto","margin-bottom":"auto"}}]}}}s(935);class v extends i{constructor(e,t){super("dependencies","Dependencies",e,t)}view(){let e=new a.Subject,t=new w(this.asset,this.appState);return new x(t,e)}}class w{constructor(e,t){this.asset=e,this.appState=t,this.userPicks={},this.libsVersionsCache={},this.requirements$=new a.ReplaySubject,this.selectedPacks$=new a.BehaviorSubject([]),this.selectedComponents$=new a.BehaviorSubject([]),this.dependencies$=new a.BehaviorSubject({}),this.versions$=new a.BehaviorSubject({}),this.selectedVersion$=new a.ReplaySubject(1),this.selectedVersionAcc$=new a.BehaviorSubject({}),this.versionsState$=new a.BehaviorSubject({}),this.unsubscribe$=new a.Subject,this.userPicks={},this.libsVersionsCache={},l.kb.getFluxProject$(e.rawId).subscribe((e=>{this.requirements$.next(e.requirements),this.selectedPacks$.next(e.requirements.fluxPacks),this.selectedComponents$.next(e.requirements.fluxComponents)}));let s=e=>e.id?this.libsVersionsCache[e.id]?(0,a.of)(this.libsVersionsCache[e.id]):l.kb.getPackageMetadata$(e.id).pipe((0,c.tap)((t=>this.libsVersionsCache[e.id]=t))):this.libsVersionsCache[e.name]?(0,a.of)(this.libsVersionsCache[e.name]):s(e.name).pipe((0,c.tap)((t=>this.libsVersionsCache[e.name]=t)));this.dependencies$.pipe((0,c.mergeMap)((e=>(0,a.from)(Object.values(e)).pipe((0,c.concatMap)((e=>s(e))))))).subscribe((e=>{let t=Object.assign({},this.versions$.getValue(),{[e.name]:e.versions});this.versions$.next(t)})),this.dependencies$.pipe((0,c.takeUntil)(this.unsubscribe$),(0,c.mergeMap)((e=>(0,a.from)(Object.entries(e))))).subscribe((([e,{version:t}])=>{this.selectedVersion$.next([e,t])})),this.selectedVersion$.pipe((0,c.takeUntil)(this.unsubscribe$),(0,c.scan)(((e,[t,s])=>null==t?Object.assign({},e):Object.assign({},e,{[t]:s})),{}),(0,c.distinctUntilChanged)(((e,t)=>0===Object.keys(t).map((s=>[s,e[s]==t[s]])).filter((e=>!e[1])).length&&0===Object.keys(e).map((s=>[s,e[s]==t[s]])).filter((e=>!e[1])).length))).subscribe((e=>{this.selectedVersionAcc$.next(e)})),(0,a.combineLatest)([this.dependencies$,this.selectedVersionAcc$]).pipe((0,c.takeUntil)(this.unsubscribe$),(0,c.map)((([e,t])=>Object.keys(e).reduce(((e,s)=>Object.assign({},e,{[s]:t[s]})),{})))).subscribe((e=>this.versionsState$.next(e))),this.state$=(0,a.combineLatest)([this.dependencies$,this.selectedPacks$]).pipe((0,c.takeUntil)(this.unsubscribe$),(0,c.map)((([e,t])=>({fluxPacks:Object.entries(t).filter((([e,t])=>t&&"flux-pack-core"!=e)).map((([e,t])=>e)),libraries:e})))),this.state$.subscribe((e=>this.currentState=e)),this.requirements$.pipe((0,c.takeUntil)(this.unsubscribe$)).subscribe((e=>{let t=e.loadingGraph.lock?e.loadingGraph.lock.reduce(((e,t)=>Object.assign({},e,{[t.name]:t})),{}):Object.entries(e.libraries).map((([e,t])=>({name:e,id:void 0,version:t}))).reduce(((e,t)=>Object.assign({},e,{[t.name]:t})),{});this.dependencies$.next(t)}))}disconnect(){this.unsubscribe$.next(),this.unsubscribe$.complete()}togglePacks(e){let t=this.selectedPacks$.getValue();e.forEach((e=>t[e.name]=!t[e.name])),this.selectedPacks$.next(t),this.refreshDependencies()}selectVersion(e,t){this.selectedVersion$.next([e,t])}setDependency(e,t){this.userPicks[e]=t;let s=this.dependencies$.getValue();"object"==typeof s[e]?s[e].version=t:s[e]=t,this.refreshDependencies(s)}refreshDependencies(e){e=e||this.dependencies$.getValue();let t=Object.entries(e).reduce(((e,[t,s])=>Object.assign({},e,{[t]:"object"==typeof s?s.version:s})),{}),s={fluxPacks:this.selectedPacks$.getValue(),fluxComponents:this.selectedComponents$.getValue(),libraries:t};l.kb.updateFluxProjectMetadata$(this.asset.rawId,s).pipe((0,c.mergeMap)((()=>l.kb.getFluxProject$(this.asset.rawId)))).subscribe((e=>{this.requirements$.next(e.requirements),this.selectedPacks$.next(e.requirements.fluxPacks),this.selectedComponents$.next(e.requirements.fluxComponents)}))}isLatestVersion(e,t){return null!=e[t]&&this.dependencies$.getValue()[t].version==e[t][0]}isCurrentVersion(e,t){return this.dependencies$.getValue()[e].version==t}}class x{constructor(e,t){this.state=e,this.dataProject$=t,this.versionAvailableSelect$=new a.ReplaySubject(1),this.subscriptions=[],this.class=" m-auto h-100 d-flex flex-column",this.onclick=e=>e.stopPropagation(),this.output$=t,this.state=e,e.versions$.subscribe((e=>this.versionAvailableSelect$.next(e))),this.state.appState.selectedAsset$.pipe((0,c.skip)(1),(0,c.take)(1)).subscribe((()=>{this.state.disconnect(),this.subscriptions.forEach((e=>e.unsubscribe()))})),this.children=[{class:"w-100 text-center  py-3 fv-text-primary",style:{"font-size":"large","font-family":"fantasy"},innerText:"Dependencies of the project"},{class:"py-2 h-100 overflow-auto flex-grow-1 px-4  d-flex justify-content-center",children:[(0,d.child$)(this.state.asset.accessInfo$,(e=>e.consumerInfo.permissions.write?this.panelDependenciesReadWWrite(this.state):this.panelDependenciesReadOnly(this.state)))]}]}panelDependenciesReadWWrite(e){let t=t=>(0,d.child$)(this.versionAvailableSelect$.pipe((0,c.filter)((e=>e[t])),(0,c.tap)((s=>{e.selectVersion(t,s[t][0])}))),(s=>({class:"form-group col-sm my-auto",children:[{tag:"select",class:"form-control",id:t,onchange:s=>e.selectVersion(t,s.target.value),children:s[t].map((e=>({tag:"option",value:e,class:"px-2",innerText:e})))}]}))),s=(t,s)=>(0,d.child$)(e.versionsState$,(s=>{if(e.isCurrentVersion(t,s[t]))return{};let r=new g.Button.State;return this.subscriptions.push(r.click$.subscribe((()=>e.setDependency(t,s[t])))),new g.Button.View({state:r,contentView:()=>({innerText:"Update"}),class:"fv-text-focus fv-bg-background "})})),r=t=>(0,d.child$)(e.versions$,(s=>e.isLatestVersion(s,t)?{tag:"label",innerText:"",class:"col-sm"}:{tag:"label",innerText:"upgrade available",class:"col-sm color-primary"}));return{children:[y(["name","version","","versions available",""],e.dependencies$.pipe((0,c.map)((e=>Object.entries(e).map((([e,a])=>[{tag:"label",class:"col-sm",innerText:e.includes("/")?e.split("/")[1]:e},{tag:"label",class:"col-sm",innerText:a.version},r(e),t(e),s(e,a.version)]))))),[(e,t)=>e[0].innerText.localeCompare(t[0].innerText)])]}}panelDependenciesReadOnly(e){return{children:[y(["name","version"],e.dependencies$.pipe((0,c.map)((e=>Object.entries(e).map((([e,t])=>[{tag:"label",class:"col-sm",innerText:e.includes("/")?e.split("/")[1]:e},{tag:"label",class:"col-sm",innerText:t.version}]))))),[(e,t)=>e[0].innerText.localeCompare(t[0].innerText)])]}}}function y(e,t,s){function r(e){return e.sort(((e,t)=>s[0](e,t)))}return(0,d.child$)(t,(t=>({tag:"table",class:"pl-4 fv-text-primary",children:[{tag:"tr",children:e.map((e=>({tag:"th",scope:"col",children:[{tag:"label",class:"col-sm",innerText:e}]})))},...r(t).map((e=>({tag:"tr",class:"text-left",style:{height:"50px"},children:e.map((e=>({tag:"th",class:"font-weight-light",children:[e]})))})))]})))}function $(e,t){return b(e,t)}class I extends i{constructor(e,t){super("package","Package info",e,t),this.asset=e,this.appState=t}view(){return{class:"d-flex flex-column p-5 h-100",children:[(0,d.child$)(l.kb.getPackageMetadata$(this.asset.rawId),(e=>({class:"h-100 fv-text-primary",children:[{class:"h-100 d-flex flex-column",children:[{class:"d-flex align-items-center m-3",children:[{innerText:"namespace:",class:"px-2"},{innerText:`${e.namespace}`,style:{"font-family":"fantasy"}}]},{class:"d-flex align-items-center m-3",children:[{innerText:"name:",class:"px-2"},{innerText:`${e.name}`,style:{"font-family":"fantasy"}}]},{class:"m-3 flex-grow-1",style:{height:"10px"},children:[{innerText:"versions:",class:"px-2"},{class:"h-100 overflow-auto",children:e.versions.map((e=>({innerText:e,style:{"font-family":"fantasy"}})))}]}]}]})))]}}}let S={data:(e,t)=>u(0,t),"group-showcase":(e,t)=>function(e,t){return b(e,t)}(e,t),"flux-project":(e,t)=>function(e,t){return b(e,t)}(e,t),"flux-pack":(e,t)=>$(e,t),package:(e,t)=>$(e,t),"drive-pack":(e,t)=>u(0,t)},k={data:e=>({class:"w-100 d-flex flex-wrap",children:[]}),"group-showcase":e=>function(e){let t=new g.Button.State,s=new g.Button.View({state:t,contentView:()=>({innerText:"Presentation"})});return t.click$.subscribe((()=>window.location.href=`/ui/flux-runner/?id=${e.rawId}`)),{class:"w-100 d-flex flex-wrap",children:[s]}}(e),"flux-project":e=>function(e){let t="fv-btn fv-btn-secondary mx-1 ",s=new g.Button.State,r=new g.Button.View({state:s,class:t,contentView:()=>({innerText:"run"})});s.click$.subscribe((()=>window.location.href=`/ui/flux-runner/?id=${e.rawId}`));let a=new g.Button.State,n=new g.Button.View({state:a,class:t,contentView:()=>({innerText:"construct"})});a.click$.subscribe((()=>window.location.href=`/ui/flux-builder/?id=${e.rawId}`));let i=new g.Button.State,d=new g.Button.View({state:i,class:t,contentView:()=>({innerText:"edit"})});return i.click$.subscribe((()=>window.location.href=`/ui/assets-publish-ui?kind=flux-project&related_id=${e.rawId}`)),{class:"w-100 d-flex flex-wrap",children:[r,n,d]}}(e),"flux-pack":e=>({class:"w-100 d-flex flex-wrap",children:{}}),package:e=>({class:"w-100 d-flex flex-wrap",children:{}}),"drive-pack":e=>({class:"w-100 d-flex flex-wrap",children:[]})};class q extends i{constructor(e,t){super("general","General",e,t)}view(){new a.BehaviorSubject(0).next(0);let e=S[this.asset.kind](this.appState,this.asset);var t,s;return{class:"w-100 p-3 h-100 overflow-auto fv-text-primary d-flex",children:[e.snippets,{class:"flex-grow-1 d-flex",children:[e.view,(t=this.appState,s=this.asset,{class:"w-50 d-flex flex-column px-4",children:[j(t,s),k[s.kind](s),T(t,s),O(t,s)]})]}]}}}function F(e){return{tag:"i",class:"fas fa-pen px-2",onclick:()=>{e.next(!0)}}}function N(e,t,s,r,a){return{tag:"i",class:"fas fa-check px-2",onclick:()=>{r.next(!1);let n=Object.assign({},t,{[s]:a.getValue()});e.updateAsset(t,n)}}}function j(e,t){let s=new a.BehaviorSubject(!1),r=new a.BehaviorSubject(t.name);return(0,d.child$)(s,(a=>a?{class:"d-flex align-items-center py-2",children:[{tag:"input",class:"w-100 text-center fv-text-on-background",value:t.name,style:{"font-size":"x-large"},onchange:e=>{r.next(e.target.value)}},N(e,t,"name",s,r)]}:{class:"d-flex align-items-center",children:[{class:"w-100 text-center fv-text-primary",innerText:t.name,style:{"font-size":"xxx-large"}},(0,d.child$)(t.accessInfo$.pipe((0,c.filter)((e=>e.consumerInfo.permissions.write))),(()=>F(s)))]}))}function O(e,t){let s=new a.BehaviorSubject(!1),r=new a.BehaviorSubject(t.description);return(0,d.child$)(s,(a=>a?{class:"w-100  py-2",children:[{class:"d-flex align-items-center",children:[{class:"fv-text-disabled",innerText:"Description",style:{"font-size":"larger"}},N(e,t,"description",s,r)]},{tag:"textarea",class:"w-100",style:{height:"200px"},innerText:t.description,oninput:e=>{r.next(e.target.value)}},{class:"w-100 text-justify fv-text-primary",innerHTML:r.pipe((0,c.map)((e=>e))),style:{"font-size":"large"}}]}:{class:"w-100  py-2",children:[{class:"d-flex align-items-center",children:[{class:"fv-text-focus",innerText:"Description",style:{"font-size":"larger"}},(0,d.child$)(t.accessInfo$.pipe((0,c.filter)((e=>e.consumerInfo.permissions.write))),(()=>F(s)))]},{class:"w-100 text-justify fv-text-primary",innerHTML:t.description,style:{"font-size":"large"}}]}))}function T(e,t){let s=new a.Subject,r=new a.BehaviorSubject(t.tags);return{class:"w-100 py-2",children:[{class:"d-flex align-items-center",children:[{class:"fv-text-focus",innerText:"Tags",style:{"font-size":"larger"}},(0,d.child$)(t.accessInfo$.pipe((0,c.filter)((e=>e.consumerInfo.permissions.write))),(()=>({tag:"i",class:"fas fa-plus px-2",onclick:()=>{s.next(!0)}})))]},{class:"w-100 text-justify fv-text-primary d-flex flex-wrap my-2",children:t.tags.map((s=>function(e,t,s){return{class:"d-flex align-items-center px-2",children:[{class:"border fv-color-primary mx-1 px-2",innerText:s},(0,d.child$)(t.accessInfo$.pipe((0,c.filter)((e=>e.consumerInfo.permissions.write))),(()=>({tag:"i",class:"fas fa-times fv-color-primary",onclick:()=>{let r=Object.assign({},t,{tags:t.tags.filter((e=>e!=s))});e.updateAsset(t,r)}})))]}}(e,t,s)))},(0,d.child$)(s,(a=>a?function(e,t,s,r){return{class:"d-flex align-items-center",children:[{tag:"input",class:"border fv-text-background mx-2 px-2",value:"",onchange:e=>s.next(t.tags.concat([e.target.value]))},N(e,t,"tags",r,s)]}}(e,t,r,s):{}))]}}const D=window["@youwol/fv-group"];class P extends D.ExpandableGroup.State{constructor(e,t){super(t.name,!1),this.assetId=e,this.data=t,this.loading$=new a.BehaviorSubject(!1),this.edition$=new a.BehaviorSubject(!1),this.groupId=t.groupId,this.groupAccess$=new a.BehaviorSubject(t)}update(e){console.log("Update!",e),this.loading$.next(!0),l.kb.updateAccess$(this.assetId,this.groupId,e).subscribe((e=>{this.groupAccess$.next(e),this.loading$.next(!1),this.edition$.next(!1)}))}refresh(){console.log("refresh!"),this.loading$.next(!0),l.kb.accessInfo$(this.assetId).subscribe((e=>{console.log("Info!!",e,this.groupId);let t="*"==this.groupId?e.ownerInfo.defaultAccess:e.ownerInfo.exposingGroups.find((e=>e.groupId==this.groupId));console.log("groupAccess!!",t),this.groupAccess$.next({name:this.name,groupId:this.groupId,access:t}),this.loading$.next(!1),this.edition$.next(!1)}))}}class A extends i{constructor(e,t){super("access","Access",e,t),this.titleClass="w-100 text-center",this.titleStyle={"font-family":"fantasy","font-size":"large"},this.classSection="py-2"}view(){return{children:[(0,d.child$)(this.asset.accessInfo$,(e=>({class:"d-flex w-100 h-100 p-4 fv-text-primary",children:[{class:"w-50",children:[this.commonView(e)]},{class:"w-50",children:[this.ownerView(this.asset.assetId,e)]}]})))]}}commonView(e){return{children:[{class:this.classSection,children:[{class:this.titleClass,style:this.titleStyle,innerText:"Owner information"},{innerText:e.owningGroup.name}]},{class:this.classSection,children:[{class:this.titleClass,style:this.titleStyle,innerText:"Your permissions"},{class:"d-flex align-items-center justify-content-around",children:[{class:"d-flex align-items-center "+(e.consumerInfo.permissions.read?"fv-text-focus":"fv-text-disabled"),children:[{class:e.consumerInfo.permissions.read?"fas fa-check":"fas fa-times"},{class:"px-2",innerText:"read"}]},{class:"d-flex align-items-center "+(e.consumerInfo.permissions.write?"fv-text-focus":"fv-text-disabled"),children:[{class:e.consumerInfo.permissions.write?"fas fa-check":"fas fa-times"},{class:"px-2",innerText:"write"}]},e.consumerInfo.permissions.expiration?{innertText:e.consumerInfo.permissions.expiration}:{}]}]}]}}ownerView(e,t){if(!t.ownerInfo)return{};let s=t.ownerInfo.exposingGroups.map((t=>{let s=new P(e,t);return new D.ExpandableGroup.View({state:s,contentView:U,headerView:E})})),r=new P(e,{groupId:"*",name:"*",access:t.ownerInfo.defaultAccess}),a=new D.ExpandableGroup.View({state:r,contentView:U,headerView:E});return{children:[{class:this.classSection,children:[{class:this.titleClass,style:this.titleStyle,innerText:"Default access"},{class:this.classSection,children:[a]}]},{class:this.classSection,children:[{class:this.titleClass,style:this.titleStyle,innerText:"Exposing groups"},{class:this.classSection,children:s}]}]}}}function E(e){let t=t=>({tag:"span",class:"fv-text-focus",innerText:(0,d.attr$)((0,a.combineLatest)([e.groupAccess$,e.edition$]),(([e,s])=>(console.log("headerView",{key:t,groupAccess:e,edition:s}),s?"":`${t} ${e.access[t]}`)))});return{class:"fv-bg-background px-2 rounded",children:[{class:"d-flex align-items-center fv-pointer",children:[{tag:"i",class:(0,d.attr$)(e.expanded$,(e=>e?"fas fa-caret-down":"fas fa-caret-right"))},{tag:"i",class:(0,d.attr$)(e.loading$,(e=>e?"fas fa-spinner fa-spin":""))},{class:"d-flex align-items-center w-100",children:[{tag:"span",class:"px-2 fv-text-focus",innerText:e.name},{tag:"i",class:(0,d.attr$)(e.edition$,(e=>e?"":"fas fa-pen px-2 fv-text-focus")),onclick:t=>{e.edition$.next(!0),e.expanded$.next(!0),t.stopPropagation()}},{class:"d-flex align-items-center flex-grow-1 fv-text-focus justify-content-around",children:[t("read"),t("share")]}]}]}],onclick:t=>{e.expanded$.next(!e.expanded$.getValue()),t.stopPropagation()}}}function U(e){class t extends o.Select.ItemData{constructor(e,t,s){super(e,t),this.expiration=s}}let s=[new t("forbidden","Forbidden",null),new t("authorized","Authorized",null),new t("expiration-date","Expiration-date",Date.now())],r=new o.Select.State(s,e.data.access.read),n=new o.Select.View({state:r}),i=[new t("forbidden","Forbidden",null),new t("authorized","Authorized",null)],l=new o.Select.State(i,e.data.access.share),u=new o.Select.View({state:l}),p=new a.BehaviorSubject({}),h=(0,a.combineLatest)([e.groupAccess$.pipe((0,c.map)((e=>e.access))),r.selection$,l.selection$,p.pipe((0,c.distinct)())]).pipe((0,c.map)((([e,t,s,r])=>(console.log([e,t,s,r]),{...e,read:t.id,share:s.id,parameters:r})))),f=new g.Button.State,m=new g.Button.View({state:f,contentView:()=>({innerText:"submit"}),class:"fv-btn fv-btn-secondary"});f.click$.pipe((0,c.withLatestFrom)(h)).subscribe((([t,s])=>{e.update(s)}));let b=new g.Button.State,v=new g.Button.View({state:b,contentView:()=>({innerText:"cancel"}),class:"fv-btn fv-btn-secondary"});b.click$.subscribe((()=>{e.refresh()}));let w={forbidden:()=>({}),authorized:()=>({}),"expiration-date":C};return{class:"p-2",children:[{class:"d-flex align-items-center",children:[{innerText:"read:",class:"px-2"},(0,d.child$)(e.edition$,(t=>t?n:{innerText:(0,d.attr$)(e.groupAccess$,(e=>e.access.read))}))]},{class:"d-flex align-items-center",children:[{innerText:"share:",class:"px-2"},(0,d.child$)(e.edition$,(t=>t?u:{innerText:(0,d.attr$)(e.groupAccess$,(e=>e.access.share))}))]},(0,d.child$)((0,a.combineLatest)([h,e.edition$]),(([t,s])=>w[t.read](t,e.edition$,p))),(0,d.child$)(e.edition$,(e=>e?{class:"py-2",children:[m,v]}:{}))]}}function C(e,t,s){return{class:"d-flex align-items-center py-2",children:[{innerText:"expiration-date:",class:"px-2"},(0,d.child$)(t,(t=>t?{tag:"input",type:"date",value:e.parameters.expiration,onchange:e=>{let t=(e.target.valueAsNumber-Date.now())/1e3;s.next({period:t,expiration:e.target.value})}}:{innerText:e.expiration}))]}}class R extends i{constructor(e,t){super("usage","Usage",e,t)}view(){return{class:"d-flex w-100 h-100 p-4",children:[{class:"d-flex w-100 h-100 flex-column",children:[{tag:"label",class:this.titleClass,style:this.titleStyle,innerText:"Statistics"},{id:"graph_statistics_container",class:"flex-grow-1 fv-bg-background",connectedCallback:e=>{e.ownSubscriptions(l.kb.statistics$(this.asset.assetId,10).subscribe((({accessHistory:{bins:e,binSize:t}})=>{e.length>0&&this.renderGraph(e,t)})))}}]}]}}renderGraph(e,t){}}let V={data:(e,t)=>[new f(t,e)],"group-showcase":(e,t)=>[],"flux-project":(e,t)=>[new v(t,e)],"flux-pack":(e,t)=>[new I(t,e)],package:(e,t)=>[new I(t,e)],"drive-pack":(e,t)=>[]};class B extends D.ExpandableGroup.State{constructor(e,t,s){super(e,t),this.appState=s}}function _(e){let t=new a.BehaviorSubject(!1),s=new g.Switch.State(e.appState.recursiveSearch$.getValue()),r=s.value$.subscribe((t=>e.appState.recursiveSearch$.next(t))),n=new g.Switch.View({state:s,connectedCallback:e=>e.subscriptions.push(r)});return{class:"fv-bg-background-alt px-2 rounded",onclick:e=>{e.stopPropagation()},children:[{class:"d-flex align-items-center fv-pointer",children:[{tag:"span",class:"px-2 fv-text-focus",innerText:e.name},{class:(0,d.attr$)(t,(e=>e?"fv-color-focus":""),{wrapper:e=>`fas fa-angle-double-down px-2 fv-hover-opacity ${e}`}),onclick:e=>{t.next(!t.getValue()),e.stopPropagation()}},{class:"fv-bg-background ml-3 mr-2 my-1 d-flex align-items-center rounded",style:{"font-size":"small"},children:[{children:[{tag:"i",class:"fas fa-filter tw-text-light px-1"},{tag:"input",class:"m-1 fv-bg-background fv-color-primary",type:"text",style:{border:"black",padding:"0px"}}],onclick:e=>e.stopPropagation()}]},{class:"d-flex align-items-center px-3",children:[{tag:"span",class:(0,d.attr$)(s.value$,(e=>e?"fv-text-focus":"fv-text-disabled"),{wrapper:e=>"px-1 "+e}),innerText:"recursive"},n]}]},(0,d.child$)(t,(e=>e?{class:"fv-text-focus w-100 text-center",tag:"i",innerText:"Here will come advanced filtering options"}:{}))]}}function M(e){let t=t=>e.selectedAsset$.pipe((0,c.map)((e=>e&&t.assetId==e.assetId))),s=t=>{e.selectedAsset$.next(t)},r=e.updatedAsset$.pipe((0,c.withLatestFrom)(e.items$),(0,c.map)((([e,t])=>t.map((t=>t.assetId==e.assetId?e:t)))));return function(e,t,s){let r=new B("ASSET SEARCH",new a.BehaviorSubject(!0),e);return new D.ExpandableGroup.View({state:r,contentView:s,headerView:_,class:(0,d.attr$)(e.selectedAsset$,(e=>e?"h-50":"h-100"),{wrapper:e=>`fv-text-primary mx-1 w-100 d-flex flex-column ${e}`}),style:{"font-family":"math","max-height":"100%"}})}(e,0,(()=>({class:"w-100 p-3 h-25 border mb-2 overflow-auto flex-grow-1 fv-text-background",onclick:()=>e.selectedAsset$.next(void 0),children:[(0,d.child$)((0,a.merge)(e.items$,r),(e=>function(e,t,s,r=""){return{class:"w-100 d-flex flex-wrap justify-content-around",children:e.map((e=>{return{tag:"div",class:(0,d.attr$)(t(e),(e=>e?" selected":""),{wrapper:e=>`m-1 fv-bg-background flux-project-card fv-pointer ${e}`}),style:{"box-shadow":"10px 5px 5px black",position:"relative"},onclick:t=>{s(e),t.stopPropagation()},children:[{class:"d-flex justify-content-center "+r,style:{width:"250px",height:"250px"},children:[e.thumbnails[0]?{tag:"img",class:"",src:e.thumbnails[0],style:{"margin-top":"auto","margin-bottom":"auto",transform:"scale(1.25)"}}:{}]},{class:"w-100 h-25 fv-text-primary  d-flex align-items-center",style:{position:"absolute",top:"75%","background-color":"rgba(0,0,0,0.7)"},children:[{class:(a=e,("flux-project"==a.kind?"fas fa-play":"exposed-group"==a.kind?"fas fa-users":"data"==a.kind?"fas fa-file":void 0)+" mx-2 fv-text-focus")},{class:"text-center mx-2",innerText:e.name,style:{"margin-top":"auto","margin-bottom":"auto","font-family":"fantasy","font-size":"larger"}}]}]};var a}))}}(e,t,s)))]})))}let G={rename:(e,t)=>({icon:"fas fa-pen",name:"rename",enable:!1,exe:()=>{e.toggleRenaming(t)},applicable:(e,t)=>!(!t.write||e instanceof n.Uq.TrashNode)&&(e instanceof n.Uq.ItemNode?!e.borrowed:e instanceof n.Uq.FolderNode)}),newFolder:(e,t)=>({icon:"fas fa-folder",name:"new folder",enable:!1,exe:()=>{e.newFolder(t)},applicable:(e,t)=>(e instanceof n.Uq.FolderNode||e instanceof n.Uq.DriveNode)&&t.write}),packageDrive:(e,t)=>({icon:"fas fa-archive",name:"package archive",enable:!1,exe:()=>{e.package(t)},applicable:(e,t)=>e instanceof n.Uq.DriveNode&&t.write}),unpackage:(e,t)=>({icon:"fas fa-archive",name:"unpackage archive",enable:!1,exe:()=>{e.unpackage(t)},applicable:(e,t)=>e instanceof n.Uq.DataNode&&e.name.includes("drive-pack")&&t.write}),download:(e,t)=>({icon:"fas fa-download",name:"download file",enable:!1,exe:()=>{let e=t,s=document.createElement("a");s.setAttribute("href",`/api/assets-gateway/raw/data/${e.relatedId}`),s.setAttribute("download",e.name),s.dispatchEvent(new MouseEvent("click")),s.remove()},applicable:(e,t)=>e instanceof n.Uq.DataNode&&t.write}),deleteFolder:(e,t)=>({icon:"fas fa-trash",name:"delete",enable:!1,exe:()=>{e.deleteFolder(t)},applicable:(e,t)=>e instanceof n.Uq.FolderNode&&t.write}),clearTrash:(e,t)=>({icon:"fas fa-times",name:"clear trash",enable:!1,exe:()=>{e.purgeDrive(t)},applicable:(e,t)=>e instanceof n.Uq.TrashNode&&t.write}),newFluxProject:(e,t)=>({icon:"fas fa-play",name:"new app",enable:!1,exe:()=>{e.newFluxProject(t)},applicable:(e,t)=>e instanceof n.Uq.FolderNode&&t.write}),paste:(e,t)=>({icon:"fas fa-paste",name:"paste",enable:!0,exe:()=>{e.pasteItem(t)},applicable:(e,t)=>e instanceof n.Uq.FolderNode&&t.write}),cut:(e,t)=>({icon:"fas fa-cut",name:"cut",enable:!1,exe:()=>{e.cutItem(t)},applicable:(e,t)=>!!t.write&&(e instanceof n.Uq.ItemNode?!e.borrowed:e instanceof n.Uq.FolderNode)}),viewPresentationGroup:(e,t)=>({icon:"fas fa-play",name:"navigate to presentation",enable:!0,exe:()=>{},applicable:(e,t)=>e instanceof n.Uq.ExposedGroupNode&&t.read}),importData:(e,t)=>({icon:"fas fa-file-import",name:"import data",enable:!1,exe:()=>{let s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("multiple","true"),s.dispatchEvent(new MouseEvent("click")),s.onchange=r=>{e.uploadFiles(t,s),s.remove()}},applicable:(e,t)=>e instanceof n.Uq.FolderNode||e instanceof n.Uq.DriveNode&&t.write}),deleteItem:(e,t)=>({icon:"fas fa-trash",name:"delete",enable:!1,exe:()=>{e.deleteItem(t)},applicable:(e,t)=>e instanceof n.Uq.ItemNode&&t.write}),newDrive:(e,t)=>({icon:"fas fa-drive",name:"new drive",enable:!1,exe:()=>{e.newDrive(t)},applicable:(e,t)=>e instanceof n.Uq.GroupNode&&t.write}),deleteDrive:(e,t)=>({icon:"fas fa-trash",name:"delete",enable:!1,exe:()=>{e.deleteDrive(t)},applicable:(e,t)=>e instanceof n.Uq.DriveNode&&t.write}),addPackage:(e,t)=>({icon:"fas fa-box",name:"add package",enable:!0,exe:()=>{let s=document.createElement("input");s.setAttribute("type","file"),s.dispatchEvent(new MouseEvent("click")),s.onchange=r=>{e.addPackage(t,s),s.remove()}},applicable:(e,t)=>e instanceof n.Uq.FolderNode&&t.write}),exposeGroup:(e,t)=>({icon:"fas fa-users",name:"advertise group",enable:!0,exe:()=>{document.querySelector("body").appendChild(undefined)},applicable:(e,t)=>e instanceof n.Uq.FolderNode&&t.write}),borrow:(e,t)=>({icon:"fas fa-download",name:"borrow item",enable:!0,exe:()=>{e.borrowItem(t)},applicable:(e,t)=>!!t.share&&e instanceof n.Uq.ItemNode}),copyFileIdInClipboard:(e,t)=>({icon:"fas fa-copy",name:"copy fileId in clipboard",enable:!0,exe:()=>{navigator.clipboard.writeText(t.id).then((function(){console.log("Async: Copying to clipboard was successful!")}))},applicable:(e,t)=>e instanceof n.Uq.DataNode&&t.read}),favorite:(e,t)=>({icon:"fas fa-star",name:"add to favorite bar",enable:!0,exe:()=>{e.addFavorite(t)},applicable:(e,t)=>e instanceof n.Uq.ItemNode})};var H=s(888);function L(e){let t=new D.ExpandableGroup.State("EXPLORER",!0);return new D.ExpandableGroup.View({state:t,headerView:Y,contentView:()=>function(e){let t=new H.ImmutableTree.View({state:e,id:"browser-tree-view",headerView:X,class:"fv-text-primary",options:{stepPadding:20},connectedCallback:s=>{let r=e.selectedNode$.pipe((0,c.filter)((e=>e instanceof n.Uq.FolderNode))).subscribe((t=>{e.selectedFolder$.next(t)})),i=e.selectedNode$.pipe((0,c.filter)((e=>e instanceof n.Uq.DriveNode))).subscribe((t=>{e.selectedDrive$.next(t)})),o=t.contextMenu$.pipe((0,c.mergeMap)((({data:t,event:s})=>function(e,t){if(t instanceof n.Uq.DeletedNode)return(0,a.of)([]);if(t instanceof n.Uq.GroupNode){let s=Object.values(G).map((s=>s(e,t))).filter((e=>e.applicable(t,{read:!0,write:!0,share:!0})));return(0,a.of)(s)}return l.kb.permissions$(t instanceof n.Uq.TrashNode?t.driveId:t.id).pipe((0,c.map)((s=>({state:e,node:t,permissions:s}))),(0,c.map)((({state:e,node:t,permissions:s})=>Object.values(G).map((s=>s(e,t))).filter((e=>e.applicable(t,s))))))}(e,t.node).pipe((0,c.map)((e=>({actions:e,event:s}))))))).subscribe((({actions:e,event:t})=>{console.log(t,e),function(e,t){let s,r={class:"py-1 fv-bg-background-alt fv-text-primary position-absolute",style:{top:t.clientY-25+"px",left:t.clientX-25+"px"},onmouseleave:()=>s.remove(),children:e.map((e=>{return{class:"px-3 fv-hover-text-focus fv-pointer",children:[(t=e.name,r=e.icon,{class:"d-flex align-items-center",children:[{tag:"i",class:r},{tag:"span",class:"mx-3",innerText:t,style:{"user-select":"none"}}]})],onclick:()=>{e.exe(),s.remove()}};var t,r}))};s=(0,d.render)(r),document.body.appendChild(s)}(e,t)})),u=e.selectedNode$.pipe((0,c.filter)((e=>e instanceof n.Uq.ItemNode)),(0,c.mergeMap)((e=>l.kb.getAsset$(e.assetId).pipe((0,c.map)((t=>({assetData:t,treeId:e.id}))))))).subscribe((({treeId:t,assetData:s})=>{let r=new n.xR({...s,treeId:t});e.selectedAsset$.next(r)}));s.subscriptions.push(r,i,o,u)}});return e.view=t,{class:"h-100 overflow-auto d-flex justify-content-between",children:[t,z(e)]}}(e),className:"h-100 d-flex flex-column"})}function z(e,t){let s=e.favorites$.pipe((0,c.distinctUntilChanged)(((e,t)=>e.reduce(((e,t)=>e+t.assetId),"")==t.reduce(((e,t)=>e+t.assetId),""))));return{class:"favorite-bar d-flex flex-column",style:(0,d.attr$)(e.favorites$,(e=>e.length>0?{width:"100px",height:"fit-content"}:{width:"25px",height:"fit-content"})),onmouseenter:()=>{e.expandFavoritesBar()},onmouseleave:()=>{let t=e.favorites$.pipe((0,c.skip)(1),(0,c.takeUntil)((0,a.timer)(500)));(0,a.timer)(500).pipe((0,c.takeUntil)(t)).subscribe((()=>e.collapseFavoritesBar()))},children:[{class:"py-2 fv-text-focus  text-center px-2",children:[{tag:"i",class:"fas fa-star py-1 float-right"}]},(0,d.child$)(s,(t=>({class:"w-100 favorite-bar-container favorites-container",children:t.map((t=>{let s=()=>{l.kb.getAsset$(t.assetId).subscribe((t=>{e.selectedAsset$.next(new n.xR(t))}))};return{class:"w-100 fv-pointer  text-center my-2  fv-text-background fv-bg-primary favorite-item",children:[t.imageSrc?{tag:"img",class:"d-flex justify-content-center w-100",style:{"margin-top":"auto","margin-bottom":"auto"},src:t.imageSrc,onclick:s}:{innerText:t.name,class:" py-2 w-100 ",style:{"margin-top":"auto","margin-bottom":"auto","font-size":"small"},onclick:s}]}}))})))]}}function J(e,t){return{tag:"input",type:"text",autofocus:!0,style:{"z-index":200},class:"mx-2",data:e.name,onclick:e=>e.stopPropagation(),onkeydown:s=>{"Enter"===s.key&&t.rename(e,s.target.value)}}}function W(e,t,s){let r={};return s instanceof n.Uq.ItemNode&&s.borrowed&&(r={"font-family":"monospace",color:"khaki"}),{class:"d-flex w-100 align-items-baseline fv-pointer",children:[{tag:"i",class:t},{tag:"span",class:"mx-2 w-100",innerText:s.name,style:(0,d.attr$)(s.status$,(e=>e.find((e=>"cut"==e.type))?{"user-select":"none",opacity:.5,...r}:{"user-select":"none",opacity:1,...r}))},(0,d.child$)(s.status$,(e=>e.find((e=>"request-pending"==e.type))?{tag:"i",class:"fas fa-cog fa-spin"}:{}))]}}function X(e,t){return t instanceof n.Uq.RootNode||t instanceof n.Uq.GroupNode?W(0,"fas fa-users",t):t instanceof n.Uq.DriveNode?(0,d.child$)(t.status$,(s=>s.find((e=>"renaming"==e.type))?J(t,e):W(0,"fas fa-hdd",t))):t instanceof n.Uq.FolderNode?(0,d.child$)(t.status$,(s=>s.find((e=>"renaming"==e.type))?J(t,e):W(0,"fas fa-folder",t))):t instanceof n.Uq.FluxProjectNode?(0,d.child$)(t.status$,(s=>s.find((e=>"renaming"==e.type))?J(t,e):W(0,"fas fa-play",t))):t instanceof n.Uq.FluxPackNode||t instanceof n.Uq.PackageNode?W(0,"fas fa-box",t):t instanceof n.Uq.TrashNode?W(0,"fas fa-trash",t):t instanceof n.Uq.DeletedFolderNode?W(0,"fas fa-folder",t):t instanceof n.Uq.DeletedItemNode?W(0,"fas fa-item",t):t instanceof n.Uq.ExposedGroupNode?W(0,"fas fa-users",t):t instanceof n.Uq.DataNode?W(0,"fas fa-file",t):t instanceof n.Uq.ProgressNode?function(e,t){return{class:"d-flex w-100 align-items-baseline fv-pointer",children:[{tag:"i",class:(0,d.attr$)(t.progress$,(e=>e.step==n.Ih.SENDING?"fas fa-cloud-upload-alt fv-text-focus":"fas fa-cog fa-spin fv-text-disabled"))},{children:[{tag:"span",class:"mx-2 w-100 fv-text-disabled",innerText:t.name},{class:"d-flex fv-bg-primary",children:[{style:(0,d.attr$)(t.progress$,(e=>({width:e.percentSent+"%",height:"5px","background-color":"green"})))},{class:"flex-grow-1"}]}]}]}}(0,t):void 0}function Y(e){let t=new a.BehaviorSubject(!1);return{class:"fv-bg-background-alt px-2 rounded",children:[{class:"d-flex align-items-center fv-pointer",children:[{tag:"i",class:(0,d.attr$)(e.expanded$,(e=>e?"fas fa-caret-down":"fas fa-caret-right"))},{tag:"span",class:"px-2 fv-text-focus",innerText:e.name},{class:(0,d.attr$)(t,(e=>e?"fv-text-focus":"fv-text-primary"),{wrapper:e=>"fas fa-angle-double-down px-2 fv-hover-opacity "+e}),onclick:e=>{t.next(!t.getValue()),e.stopPropagation()}},{class:"fv-bg-background fv-text-primary ml-3 mr-2 my-1 d-flex align-items-center rounded",style:{"font-size":"small"},children:[{children:[{tag:"i",class:"fas fa-filter px-1"},{tag:"input",class:"m-1 fv-bg-background fv-text-primary",type:"text",style:{border:"black",padding:"0px"}}],onclick:e=>e.stopPropagation()}]}]},(0,d.child$)(t,(e=>e?{class:"fv-text-focus w-100 text-center",tag:"i",innerText:"Here will come advanced filtering options"}:{}))]}}class K{constructor(e){this.state=e}render(){let e=(0,d.render)({tag:"div",class:"w-100 h-100 p-1 d-flex",children:[{class:"d-flex flex-column h-100 ",style:{width:"400px","min-width":"400px"},children:[L(this.state)]},{class:"d-flex flex-column w-100 h-100 flex-grow-1",children:[M(this.state),(0,d.child$)(this.state.selectedAsset$,(e=>function(e,t){if(!t)return{};let s=new n.B_(t),i=new a.BehaviorSubject("general"),o=new q(s,e),c=new A(s,e),l=(new R(s,e),[o,c].concat(V[t.kind](e,s))),u=new r.Tabs.State(l,i);return new r.Tabs.View({state:u,headerView:(e,t)=>({class:(0,d.attr$)(e.selectedId$,(e=>e==t.id?"fv-bg-background-alt fv-text-focus":"fv-bg-background"),{wrapper:e=>"px-2 border "+e}),innerText:t.name}),contentView:(e,t)=>t.view(),class:"h-50 d-flex flex-column mx-1",style:{"max-height":"50%"}})}(this.state,e)))]}]});document.getElementById("form-content").appendChild(e)}}},458:(e,t,s)=>{s.d(t,{kb:()=>d});var r=s(435),a=s(519),n=s(442),i=s(935);class d{static setHeaders(e){d.headers=e}static newDrive$(e){let t=`${d.urlBaseOrganisation}/groups/${e.id}/drives`,s=new Request(t,{method:"PUT",body:JSON.stringify({name:"new drive"}),headers:d.headers});return i.createObservableFromFetch(s)}static deleteItem$(e){let t=`${d.urlBaseOrganisation}/items/${e.id}`,s=(0,i.uuidv4)();e.addStatus({type:"request-pending",id:s});let r=new Request(t,{method:"DELETE",headers:d.headers});return i.createObservableFromFetch(r)}static deleteFolder$(e){let t=`${d.urlBaseOrganisation}/folders/${e.id}`,s=(0,i.uuidv4)();e.addStatus({type:"request-pending",id:s});let r=new Request(t,{method:"DELETE",headers:d.headers});return i.createObservableFromFetch(r)}static deleteDrive$(e){let t=`${d.urlBaseOrganisation}/drives/${e.id}`,s=(0,i.uuidv4)();e.addStatus({type:"request-pending",id:s});let r=new Request(t,{method:"DELETE",headers:d.headers});return i.createObservableFromFetch(r)}static newFluxProject$(e){let t=`${d.urlBaseAssets}/flux-project/location/${e.id}`,s=new Request(t,{method:"PUT",headers:d.headers});return i.createObservableFromFetch(s)}static purgeDrive$(e){let t=d.urlBaseOrganisation+`/drives/${e.driveId}/purge`,s=new Request(t,{method:"DELETE",headers:d.headers});return i.createObservableFromFetch(s)}static newFolder$(e){let t=`${d.urlBaseOrganisation}/folders/${e.id}`,s=new Request(t,{method:"PUT",body:JSON.stringify({name:"new folder"}),headers:d.headers});return i.createObservableFromFetch(s)}static renameFolder$(e,t){let s=`${d.urlBaseOrganisation}/folders/${e.id}`,r={name:t},a=new Request(s,{method:"POST",body:JSON.stringify(r),headers:d.headers});return i.createObservableFromFetch(a)}static renameDrive$(e,t){let s=`${d.urlBaseOrganisation}/drives/${e.driveId}`,r={name:t},a=new Request(s,{method:"POST",body:JSON.stringify(r),headers:d.headers});return i.createObservableFromFetch(a)}static renameAsset$(e,t){let s=`${d.urlBaseAssets}/${e.id}`,r={name:t},a=new Request(s,{method:"POST",body:JSON.stringify(r),headers:d.headers});return i.createObservableFromFetch(a)}static move$(e,t){let s=`${d.urlBaseOrganisation}/${e.id}/move`,r={destinationFolderId:t.id},a=new Request(s,{method:"POST",body:JSON.stringify(r),headers:d.headers});return i.createObservableFromFetch(a)}static borrow$(e,t){let s=`${d.urlBaseOrganisation}/${e.id}/borrow`,r={destinationFolderId:t.id},a=new Request(s,{method:"POST",body:JSON.stringify(r),headers:d.headers});return i.createObservableFromFetch(a)}static queryAssets$(e){let t=d.urlBaseAssets+"/query-tree",s=new Request(t,{method:"POST",body:JSON.stringify(e),headers:d.headers});return i.createObservableFromFetch(s).pipe((0,a.map)((({assets:e})=>e.map((e=>new n.xR(e))))))}static getAsset$(e){let t=d.urlBaseAssets+`/${e}`,s=new Request(t,{headers:d.headers});return i.createObservableFromFetch(s).pipe((0,a.map)((e=>new n.xR(e))))}static updateAsset$(e,t){let s=Object.assign({},e,t),r=d.urlBaseAssets+`/${e.assetId}`,o=new Request(r,{method:"POST",body:JSON.stringify(s),headers:d.headers});return i.createObservableFromFetch(o).pipe((0,a.map)((e=>new n.xR(e))))}static addPicture$(e,t){var s=new FormData;s.append("file",t.file,t.id);let r=d.urlBaseAssets+`/${e.assetId}/images/${t.id}`,o=new Request(r,{method:"POST",body:s,headers:d.headers});return i.createObservableFromFetch(o).pipe((0,a.map)((e=>new n.xR(e))))}static removePicture$(e,t){let s=d.urlBaseAssets+`/${e.assetId}/images/${t}`,r=new Request(s,{method:"DELETE",headers:d.headers});return i.createObservableFromFetch(r).pipe((0,a.map)((e=>new n.xR(e))))}static exposeGroup$(e,{groupId:t,name:s}){let r=d.urlBase+"/exposed-groups/groups",a={groupId:t,name:s,folderId:e.id},n=new Request(r,{method:"POST",body:JSON.stringify(a),headers:d.headers});return i.createObservableFromFetch(n)}static package$(e){let t=`/api/assets-gateway/tree/drives/${e.driveId}/package`,s=new Request(t,{method:"PUT",headers:d.headers});return i.createObservableFromFetch(s)}static unpackage$(e){let t=`/api/assets-gateway/tree/items/${e.id}/unpack`,s=new Request(t,{method:"PUT",headers:d.headers});return i.createObservableFromFetch(s)}static statistics$(e,t){let s=new Request(`/api/assets-gateway/assets/${e}/statistics?bins_count=${t}`,{headers:d.headers});return i.createObservableFromFetch(s)}static permissions$(e){let t=new Request(`/api/assets-gateway/tree/${e}/permissions`,{headers:d.headers});return i.createObservableFromFetch(t)}static accessInfo$(e){let t=new Request(`/api/assets-gateway/assets/${e}/access`,{headers:d.headers});return i.createObservableFromFetch(t)}static updateAccess$(e,t,s){let r=new Request(`/api/assets-gateway/assets/${e}/access/${t}`,{method:"PUT",body:JSON.stringify(s),headers:d.headers});return i.createObservableFromFetch(r)}static getDeletedChildren$(e,t){let s=new Request(`/api/assets-gateway/tree/drives/${t}/deleted`,{headers:d.headers});return i.createObservableFromFetch(s).pipe((0,a.map)((({items:e,folders:s})=>[...s.map((e=>new n.Uq.DeletedFolderNode({id:e.folderId,name:e.name,driveId:t}))),...e.map((e=>new n.Uq.DeletedItemNode({id:e.itemId,name:e.name,driveId:t,type:e.type})))])))}static getFolderChildren$(e,t,s){let r=new Request(`/api/assets-gateway/tree/folders/${s}/children`,{headers:d.headers});return i.createObservableFromFetch(r).pipe((0,a.map)((({items:r,folders:a})=>d.children(e,t,s,{items:r,folders:a}))))}static getDrivesChildren$(e){let t=new Request(`/api/assets-gateway/tree/groups/${e}/drives`,{headers:d.headers});return i.createObservableFromFetch(t).pipe((0,a.map)((({drives:t})=>t.map((t=>new n.Uq.DriveNode({id:t.driveId,groupId:e,name:t.name,driveId:t.driveId,children:d.getFolderChildren$(e,t.driveId,t.driveId)}))))))}static getGroupsChildren$(e=""){let t=new Request("/api/assets-gateway/groups",{headers:d.headers});return(this.allGroups?(0,r.of)(this.allGroups):i.createObservableFromFetch(t).pipe((0,a.tap)((({groups:e})=>this.allGroups=e)),(0,a.map)((({groups:e})=>e)))).pipe((0,a.map)((t=>t.filter((t=>""==e?"private"==t.path||"/youwol-users"==t.path:t.path!=e&&t.path.includes(e)&&1==t.path.slice(e.length).match(/\//g).length)).map((({id:t,path:s})=>new n.Uq.GroupNode({id:t,name:"private"==s?"private":s.slice(e.length+1),children:d.getDrivesChildren$(t).pipe((0,a.mergeMap)((e=>d.getGroupsChildren$(s).pipe((0,a.map)((t=>[...t,...e]))))))}))))))}static upload$(e,t){let s=new r.BehaviorSubject(new n.S7(t.name,n.Ih.START));var a=new FormData;a.append("file",t);var i=new XMLHttpRequest;return i.upload.onprogress=e=>{console.log("on-progress",t.name,100*e.loaded/e.total);let r=e.loaded==e.total?new n.S7(t.name,n.Ih.PROCESSING,Math.floor(100*e.loaded/e.total)):new n.S7(t.name,n.Ih.SENDING,Math.floor(100*e.loaded/e.total));s.next(r)},i.open("PUT",e,!0),Object.entries(d.headers).forEach((([e,t])=>i.setRequestHeader(e,t))),i.onload=e=>{if(4===i.readyState)if(200===i.status){let e=JSON.parse(i.responseText);setTimeout((()=>s.next(new n.S7(t.name,n.Ih.FINISHED,100,e))),500)}else console.error(i.statusText)},i.send(a),s}static uploadFile$(e,t){let s=`/api/assets-gateway/assets/data/location/${e.id}?group-id=${e.groupId}`;return d.upload$(s,t)}static uploadPackage$(e,t){let s=`/api/assets-gateway/assets/package/location/${e.id}?group-id=${e.groupId}`;return d.upload$(s,t)}static dataPreview$(e){let t=new Request(`/api/assets-gateway/raw/data/metadata/${e}/preview`,{headers:d.headers});return i.createObservableFromFetch(t)}static getDataMetadata$(e){let t=new Request(`/api/assets-gateway/raw/data/metadata/${e}`,{headers:d.headers});return i.createObservableFromFetch(t)}static updateDataMetadata$(e,t){let s=new Request(`/api/assets-gateway/raw/data/${e}/metadata`,{method:"POST",body:JSON.stringify(t),headers:d.headers});return i.createObservableFromFetch(s)}static fluxProjectAssets$(){let e=new Request("/api/assets-gateway/assets/query-flat",{method:"POST",body:JSON.stringify({whereClauses:[{column:"kind",relation:"eq",term:"flux-project"}],maxResults:100}),headers:d.headers});return i.createObservableFromFetch(e)}static modulesBoxAssets$(){let e=new Request("/api/assets-gateway/assets/query-flat",{method:"POST",body:JSON.stringify({whereClauses:[{column:"kind",relation:"eq",term:"package"}],maxResults:100}),headers:d.headers});return i.createObservableFromFetch(e)}static importFluxProjects$(e,t){let s={groupId:e.groupId,folderId:e.id,assetIds:t.map((e=>e.assetId))},r=new Request("/api/assets-gateway/flux-projects/import",{method:"POST",body:JSON.stringify(s),headers:d.headers});return i.createObservableFromFetch(r)}static getFluxProject$(e){let t=new Request(`/api/assets-gateway/raw/flux-project/${e}`,{headers:d.headers});return i.createObservableFromFetch(t)}static updateFluxProjectMetadata$(e,t){let s=new Request(`/api/assets-gateway/raw/flux-project/${e}/metadata`,{method:"POST",body:JSON.stringify(t),headers:d.headers});return i.createObservableFromFetch(s)}static getPackageMetadata$(e){let t=new Request(`/api/assets-gateway/raw/package/metadata/${e}`,{headers:d.headers});return i.createObservableFromFetch(t)}static importFluxPacks$(e,t){let s={groupId:e.groupId,folderId:e.id,assetIds:t.map((e=>e.assetId))},r=new Request("/api/assets-gateway/flux-packs/import",{method:"POST",body:JSON.stringify(s),headers:d.headers});return i.createObservableFromFetch(r)}static children(e,t,s,{items:r,folders:a}){return[...a.map((r=>new n.Uq.FolderNode({id:r.folderId,groupId:e,name:r.name,driveId:t,parentFolderId:s,children:d.getFolderChildren$(e,t,r.folderId)}))),...r.map((r=>{let a={id:r.treeId,name:r.name,groupId:e,driveId:t,folderId:s,assetId:r.assetId,relatedId:r.rawId,borrowed:r.borrowed};if("flux-project"==r.kind)return new n.Uq.FluxProjectNode(a);if("group-showcase"==r.kind)return new n.Uq.ExposedGroupNode(a);if("data"==r.kind)return new n.Uq.DataNode(a);if("drive-pack"==r.kind)return new n.Uq.DataNode(a);if("package"==r.kind)return new n.Uq.FluxPackNode(a);throw Error("Unknown asset type")})),...s==t?[new n.Uq.TrashNode({id:"trash_"+t,groupId:e,name:"trash",driveId:t,children:d.getDeletedChildren$(e,t)})]:[]]}}d.urlBase="/api/assets-gateway",d.urlBaseOrganisation="/api/assets-gateway/tree",d.urlBaseAssets="/api/assets-gateway/assets",d.urlBaseRaws="/api/assets-gateway/raw",d.allGroups=void 0,d.headers={}},442:(e,t,s)=>{s.d(t,{Ih:()=>o,S7:()=>c,xR:()=>l,B_:()=>u,rF:()=>p,Uq:()=>h});var r=s(935),a=s(888),n=s(435),i=s(519),d=s(458);const o={START:"start",SENDING:"sending",PROCESSING:"processing",FINISHED:"finished"};class c{constructor(e,t,s=0,r){this.fileName=e,this.step=t,this.percentSent=s,this.result=r}}class l{constructor({treeId:e,assetId:t,rawId:s,kind:r,name:a,groupId:n,description:i,images:d,thumbnails:o,tags:c}){this.treeId=e,this.assetId=t,this.rawId=s,this.kind=r,this.name=a,this.groupId=n,this.description=i,this.images=d,this.thumbnails=o,this.tags=c}}class u extends l{constructor(e){super(e),this.accessInfo$=d.kb.accessInfo$(this.assetId).pipe((0,i.share)())}}class p{constructor(e,t,s){this.name=e,this.assetId=t,this.imageSrc=s}}var h;!function(e){e.itemNodeFactory=function(t){if("flux-project"==t.kind)return new e.FluxProjectNode(t);if("data"==t.kind)return new e.DataNode(t);if("package"==t.kind)return new e.PackageNode(t);throw Error(`itemNodeFactory: ${t.kind} not known`)};class t extends a.ImmutableTree.Node{constructor({id:e,name:t,children:s}){super({id:e,children:s}),this.status$=new n.BehaviorSubject([]),this.name=t}addStatus({type:e,id:t}){t=t||this.id;let s=this.status$.getValue().concat({type:e,id:t});this.status$.next(s)}removeStatus({type:e,id:t}){t=t||this.id;let s=this.status$.getValue().filter((s=>s.type!=e&&s.id!=t));this.status$.next(s)}resolveChildren(){if(!this.children||Array.isArray(this.children))return;let e=(0,r.uuidv4)();return this.addStatus({type:"request-pending",id:e}),super.resolveChildren().pipe((0,i.tap)((()=>{this.removeStatus({type:"request-pending",id:e})})))}}e.BrowserNode=t,e.RootNode=class extends t{constructor({id:e,name:t,children:s}){super({id:e,name:t,children:s}),this.name=t}},e.GroupNode=class extends t{constructor({id:e,name:t,children:s}){super({id:e,name:t,children:s}),this.name=t}},e.DriveNode=class extends t{constructor({id:e,groupId:t,driveId:s,name:r,children:a}){super({id:e,name:r,children:a}),this.name=r,this.driveId=s,this.groupId=t}},e.FolderNode=class extends t{constructor({id:e,groupId:t,driveId:s,parentFolderId:r,name:a,children:n}){super({id:e,name:a,children:n}),this.name=a,this.driveId=s,this.parentFolderId=r,this.groupId=t}};class s extends t{constructor({id:e,groupId:t,name:s,driveId:r,assetId:a,relatedId:n,borrowed:i}){super({id:e,name:s,children:void 0}),this.name=s,this.groupId=t,this.assetId=a,this.relatedId=n,this.driveId=r,this.borrowed=i}}e.ItemNode=s,e.FluxProjectNode=class extends s{constructor({id:e,groupId:t,driveId:s,name:r,assetId:a,relatedId:n,borrowed:i}){super({id:e,groupId:t,name:r,driveId:s,assetId:a,relatedId:n,borrowed:i})}},e.FluxPackNode=class extends s{constructor({id:e,groupId:t,driveId:s,name:r,assetId:a,relatedId:n,borrowed:i}){super({id:e,groupId:t,name:r,driveId:s,assetId:a,relatedId:n,borrowed:i})}},e.PackageNode=class extends s{constructor({id:e,groupId:t,driveId:s,name:r,assetId:a,relatedId:n,borrowed:i}){super({id:e,groupId:t,name:r,driveId:s,assetId:a,relatedId:n,borrowed:i})}},e.TrashNode=class extends t{constructor({id:e,groupId:t,driveId:s,name:r,children:a}){super({id:e,name:r,children:a}),this.name=r,this.driveId=s,this.groupId=t}};class d extends t{constructor({id:e,name:t,driveId:s}){super({id:e,name:t,children:void 0}),this.name=t,this.driveId=s}}e.DeletedNode=d,e.DeletedFolderNode=class extends d{constructor({id:e,driveId:t,name:s}){super({id:e,name:s,driveId:t})}},e.DeletedItemNode=class extends d{constructor({id:e,driveId:t,name:s,type:r}){super({id:e,name:s,driveId:t}),this.type=r}},e.ExposedGroupNode=class extends s{constructor({id:e,groupId:t,driveId:s,name:r,assetId:a,relatedId:n,borrowed:i}){super({id:e,groupId:t,name:r,driveId:s,assetId:a,relatedId:n,borrowed:i})}},e.DataNode=class extends s{constructor({id:e,groupId:t,name:s,driveId:r,assetId:a,relatedId:n,borrowed:i}){super({id:e,groupId:t,name:s,assetId:a,driveId:r,relatedId:n,borrowed:i})}},e.ProgressNode=class extends t{constructor({id:e,name:t,progress$:s}){super({id:e,name:t}),this.progress$=s}}}(h||(h={}))},600:(e,t,s)=>{s(897);let r=s(662),a=s(869),n=s(688);document.getElementById("header").appendChild(n.createYouwolBanner());let i=new r.AppState;new a.AppView(i).render()},688:(e,t,s)=>{s.r(t),s.d(t,{createYouwolBanner:()=>a});var r=s(222);function a(){return(0,r.render)({tag:"div",class:"d-flex w-100 fv-text-primary justify-content-between align-self-center  px-3 py-2 pr-5 border-bottom",children:[{tag:"img",src:"/api/assets-gateway/raw/package/QHlvdXdvbC9mbHV4LXlvdXdvbC1lc3NlbnRpYWxz/latest/assets/images/logo_YouWol_Platform_white.png",style:{width:"250px"}}]})}},435:e=>{e.exports=rxjs},935:e=>{e.exports=window["@youwol/flux-core"]},222:e=>{e.exports=window["@youwol/flux-view"]},888:e=>{e.exports=window["@youwol/fv-tree"]},519:e=>{e.exports=window.rxjs.operators}},d={};function o(e){var t=d[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var s=d[e]={id:e,exports:{}};try{var r={id:e,module:s,factory:i[e],require:o};o.i.forEach((function(e){e(r)})),s=r.module,r.factory.call(s.exports,s,s.exports,r.require)}catch(e){throw s.error=e,e}return s.exports}o.m=i,o.c=d,o.i=[],o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.hu=e=>e+"."+o.h()+".hot-update.js",o.miniCssF=e=>{},o.hmrF=()=>"main."+o.h()+".hot-update.json",o.h=()=>"31f4103e71140e9f36ff",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},o.l=(t,s,r,a)=>{if(e[t])e[t].push(s);else{var n,i;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var l=d[c];if(l.getAttribute("src")==t){n=l;break}}n||(i=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,o.nc&&n.setAttribute("nonce",o.nc),n.src=t),e[t]=[s];var u=(s,r)=>{n.onerror=n.onload=null,clearTimeout(p);var a=e[t];if(delete e[t],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((e=>e(r))),s)return s(r)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),i&&document.head.appendChild(n)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,t,s,r,a={},n=o.c,i=[],d=[],c="idle";function l(e){c=e;for(var t=0;t<d.length;t++)d[t].call(null,e)}function u(e){if(0===t.length)return e();var s=t;return t=[],Promise.all(s).then((function(){return u(e)}))}function p(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l("check"),o.hmrM().then((function(r){if(!r)return l(m()?"ready":"idle"),null;l("prepare");var a=[];return t=[],s=[],Promise.all(Object.keys(o.hmrC).reduce((function(e,t){return o.hmrC[t](r.c,r.r,r.m,e,s,a),e}),[])).then((function(){return u((function(){return e?f(e):(l("ready"),a)}))}))}))}function h(e){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):f(e)}function f(e){e=e||{},m();var t=s.map((function(t){return t(e)}));s=void 0;var a,n=t.map((function(e){return e.error})).filter(Boolean);if(n.length>0)return l("abort"),Promise.resolve().then((function(){throw n[0]}));l("dispose"),t.forEach((function(e){e.dispose&&e.dispose()})),l("apply");var i=function(e){a||(a=e)},d=[];return t.forEach((function(e){if(e.apply){var t=e.apply(i);if(t)for(var s=0;s<t.length;s++)d.push(t[s])}})),a?(l("fail"),Promise.resolve().then((function(){throw a}))):r?f(e).then((function(e){return d.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):(l("idle"),Promise.resolve(d))}function m(){if(r)return s||(s=[]),Object.keys(o.hmrI).forEach((function(e){r.forEach((function(t){o.hmrI[e](t,s)}))})),r=void 0,!0}o.hmrD=a,o.i.push((function(f){var m,g,b,v=f.module,w=function(s,r){var a=n[r];if(!a)return s;var d=function(t){if(a.hot.active){if(n[t]){var d=n[t].parents;-1===d.indexOf(r)&&d.push(r)}else i=[r],e=t;-1===a.children.indexOf(t)&&a.children.push(t)}else console.warn("[HMR] unexpected require("+t+") from disposed module "+r),i=[];return s(t)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return s[e]},set:function(t){s[e]=t}}};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&"e"!==p&&Object.defineProperty(d,p,o(p));return d.e=function(e){return function(e){switch(c){case"ready":return l("prepare"),t.push(e),u((function(){l("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(s.e(e))},d}(f.require,f.id);v.hot=(m=f.id,g=v,b={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:e!==m,_requireSelf:function(){i=g.parents.slice(),e=m,o(m)},active:!0,accept:function(e,t,s){if(void 0===e)b._selfAccepted=!0;else if("function"==typeof e)b._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)b._acceptedDependencies[e[r]]=t||function(){},b._acceptedErrorHandlers[e[r]]=s;else b._acceptedDependencies[e]=t||function(){},b._acceptedErrorHandlers[e]=s},decline:function(e){if(void 0===e)b._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)b._declinedDependencies[e[t]]=!0;else b._declinedDependencies[e]=!0},dispose:function(e){b._disposeHandlers.push(e)},addDisposeHandler:function(e){b._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=b._disposeHandlers.indexOf(e);t>=0&&b._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":s=[],Object.keys(o.hmrI).forEach((function(e){o.hmrI[e](m,s)})),l("ready");break;case"ready":Object.keys(o.hmrI).forEach((function(e){o.hmrI[e](m,s)}));break;case"prepare":case"check":case"dispose":case"apply":(r=r||[]).push(m)}},check:p,apply:h,status:function(e){if(!e)return c;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var t=d.indexOf(e);t>=0&&d.splice(t,1)},data:a[m]},e=void 0,b),v.parents=i,v.children=[],i=[],f.require=w})),o.hmrC={},o.hmrI={}})(),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),t=(e,t,s,r)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)s();else{var i=n&&("load"===n.type?"missing":n.type),d=n&&n.target&&n.target.href||t,o=new Error("Loading CSS chunk "+e+" failed.\n("+d+")");o.code="CSS_CHUNK_LOAD_FAILED",o.type=i,o.request=d,a.parentNode.removeChild(a),r(o)}},a.href=t;var n=document.querySelector("#css-anchor");return n.parentNode.insertBefore(a,n.nextSibling),a},s=(e,t)=>{for(var s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var a=(i=s[r]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(a===e||a===t))return i}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){var i;if((a=(i=n[r]).getAttribute("data-href"))===e||a===t)return i}},r=[],a=[],n=e=>({dispose:()=>{for(var e=0;e<r.length;e++){var t=r[e];t.parentNode&&t.parentNode.removeChild(t)}r.length=0},apply:()=>{for(var e=0;e<a.length;e++)a[e].rel="stylesheet";a.length=0}}),o.hmrC.miniCss=(e,i,d,c,l,u)=>{l.push(n),e.forEach((e=>{var n=o.miniCssF(e),i=o.p+n;const d=s(n,i);d&&c.push(new Promise(((s,n)=>{var o=t(e,i,(()=>{o.as="style",o.rel="preload",s()}),n);r.push(d),a.push(o)})))}))},(()=>{var e,t,s,r,a={179:0},n={};function i(e){return new Promise(((t,s)=>{n[e]=t;var r=o.p+o.hu(e),a=new Error;o.l(r,(t=>{if(n[e]){n[e]=void 0;var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;a.message="Loading hot update chunk "+e+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,s(a)}}))}))}function d(n){function i(e){for(var t=[e],s={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var a=r.pop(),n=a.id,i=a.chain,c=o.c[n];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:n};if(c.hot._main)return{type:"unaccepted",chain:i,moduleId:n};for(var l=0;l<c.parents.length;l++){var u=c.parents[l],p=o.c[u];if(p){if(p.hot._declinedDependencies[n])return{type:"declined",chain:i.concat([u]),moduleId:n,parentId:u};-1===t.indexOf(u)&&(p.hot._acceptedDependencies[n]?(s[u]||(s[u]=[]),d(s[u],[n])):(delete s[u],t.push(u),r.push({chain:i.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:s}}function d(e,t){for(var s=0;s<t.length;s++){var r=t[s];-1===e.indexOf(r)&&e.push(r)}}o.f&&delete o.f.jsonpHmr,e=void 0;var c={},l=[],u={},p=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var h in t)if(o.o(t,h)){var f,m=t[h],g=!1,b=!1,v=!1,w="";switch((f=m?i(h):{type:"disposed",moduleId:h}).chain&&(w="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":n.onDeclined&&n.onDeclined(f),n.ignoreDeclined||(g=new Error("Aborted because of self decline: "+f.moduleId+w));break;case"declined":n.onDeclined&&n.onDeclined(f),n.ignoreDeclined||(g=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+w));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(f),n.ignoreUnaccepted||(g=new Error("Aborted because "+h+" is not accepted"+w));break;case"accepted":n.onAccepted&&n.onAccepted(f),b=!0;break;case"disposed":n.onDisposed&&n.onDisposed(f),v=!0;break;default:throw new Error("Unexception type "+f.type)}if(g)return{error:g};if(b)for(h in u[h]=m,d(l,f.outdatedModules),f.outdatedDependencies)o.o(f.outdatedDependencies,h)&&(c[h]||(c[h]=[]),d(c[h],f.outdatedDependencies[h]));v&&(d(l,[f.moduleId]),u[h]=p)}t=void 0;for(var x,y=[],$=0;$<l.length;$++){var I=l[$],S=o.c[I];S&&S.hot._selfAccepted&&u[I]!==p&&!S.hot._selfInvalidated&&y.push({module:I,require:S.hot._requireSelf,errorHandler:S.hot._selfAccepted})}return{dispose:function(){var e;s.forEach((function(e){delete a[e]})),s=void 0;for(var t,r=l.slice();r.length>0;){var n=r.pop(),i=o.c[n];if(i){var d={},u=i.hot._disposeHandlers;for($=0;$<u.length;$++)u[$].call(null,d);for(o.hmrD[n]=d,i.hot.active=!1,delete o.c[n],delete c[n],$=0;$<i.children.length;$++){var p=o.c[i.children[$]];p&&(e=p.parents.indexOf(n))>=0&&p.parents.splice(e,1)}}}for(var h in c)if(o.o(c,h)&&(i=o.c[h]))for(x=c[h],$=0;$<x.length;$++)t=x[$],(e=i.children.indexOf(t))>=0&&i.children.splice(e,1)},apply:function(e){for(var t in u)o.o(u,t)&&(o.m[t]=u[t]);for(var s=0;s<r.length;s++)r[s](o);for(var a in c)if(o.o(c,a)){var i=o.c[a];if(i){x=c[a];for(var d=[],p=[],h=[],f=0;f<x.length;f++){var m=x[f],g=i.hot._acceptedDependencies[m],b=i.hot._acceptedErrorHandlers[m];if(g){if(-1!==d.indexOf(g))continue;d.push(g),p.push(b),h.push(m)}}for(var v=0;v<d.length;v++)try{d[v].call(null,x)}catch(t){if("function"==typeof p[v])try{p[v](t,{moduleId:a,dependencyId:h[v]})}catch(s){n.onErrored&&n.onErrored({type:"accept-error-handler-errored",moduleId:a,dependencyId:h[v],error:s,originalError:t}),n.ignoreErrored||(e(s),e(t))}else n.onErrored&&n.onErrored({type:"accept-errored",moduleId:a,dependencyId:h[v],error:t}),n.ignoreErrored||e(t)}}}for(var w=0;w<y.length;w++){var $=y[w],I=$.module;try{$.require(I)}catch(t){if("function"==typeof $.errorHandler)try{$.errorHandler(t,{moduleId:I,module:o.c[I]})}catch(s){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:I,error:s,originalError:t}),n.ignoreErrored||(e(s),e(t))}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:I,error:t}),n.ignoreErrored||e(t)}}return l}}}self.webpackHotUpdate=(e,s,a)=>{for(var i in s)o.o(s,i)&&(t[i]=s[i]);a&&r.push(a),n[e]&&(n[e](),n[e]=void 0)},o.hmrI.jsonp=function(e,a){t||(t={},r=[],s=[],a.push(d)),o.o(t,e)||(t[e]=o.m[e])},o.hmrC.jsonp=function(n,c,l,u,p,h){p.push(d),e={},s=c,t=l.reduce((function(e,t){return e[t]=!1,e}),{}),r=[],n.forEach((function(t){o.o(a,t)&&void 0!==a[t]&&(u.push(i(t)),e[t]=!0)})),o.f&&(o.f.jsonpHmr=function(t,s){e&&!o.o(e,t)&&o.o(a,t)&&void 0!==a[t]&&(s.push(i(t)),e[t]=!0)})},o.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(o.p+o.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}})(),o(600)})();
//# sourceMappingURL=main.7635dd6f86b0291de49b.js.map